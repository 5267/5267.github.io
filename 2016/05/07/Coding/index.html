<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/warn.html"><![endif]-->

<title>Python | 零碎知识（1）：字典排序问题</title>
<meta name="author" content="5267">

<meta name="keywords" content="undefined">

<meta name="description " content="我与她的故事？！">

<link rel="icon" href="/images/favicon.png">

<link rel="stylesheet" href="/css/style.css">

  </head>
  <body>
    <aside id="sidebar">
  <nav id="tags">
    <a href="http://5267.github.io" id="avatar" style="background-image:url(/images/favicon.png)"></a>
    <ul id="tags__ul">
      <li id="pl__all" class="tags__li tags-btn active">所有文章</li>
      
      <li id="小技能" class="tags__li tags-btn">小技能</li>
      
      <li id="CodingLife" class="tags__li tags-btn">CodingLife</li>
      
      <li id="电影电视剧" class="tags__li tags-btn">电影电视剧</li>
      
      <li id="投资理财" class="tags__li tags-btn">投资理财</li>
      
      <li id="English" class="tags__li tags-btn">English</li>
      
      <li id="读书笔记" class="tags__li tags-btn">读书笔记</li>
      
    </ul>
    <div id="tags__bottom">
      <a href="http://github.com/5267" rel="nofollow" id="icon-github" target="_blank" class="tags-btn fontello"></a>
      <a href="http://shang.qq.com/wpa/qunwpa?idkey=fbb8977b610053616895fc132db8b9abad47b398cf3759bd569e61406de6701b" rel="nofollow" id="icon-qq" target="_blank" class="tags-btn fontello"></a>
    </div>
  </nav> <!-- end #tags -->
  <div id="posts-list">
    <form action="#" id="search-form" target="_blank">
      <a href="/" id="mobile-avatar" style="background-image:url(/images/favicon.png)"></a>
      <input id="search-input" type="text" placeholder="戳一下不会怀孕" />
    </form>
    <nav id="pl__container">
      
            
                <a class="小技能 pl__all" href="/2016/05/04/config-5267 blog/" title="How to configure 5267 blog in several  hours">
                  <span class="pl__circle"></span><span class="pl__title">How to configure 5267 blog in several  hours</span><span class="pl__date">2016-05-04</span>
                </a>
            
      
            
                <a class="CodingLife pl__all" href="/2016/05/07/Coding/" title="Python | 零碎知识（1）：字典排序问题">
                  <span class="pl__circle"></span><span class="pl__title">Python | 零碎知识（1）：字典排序问题</span><span class="pl__date">2016-05-07</span>
                </a>
            
                <a class="CodingLife pl__all" href="/2016/05/23/python-金融研究相关库/" title="Python | 零碎知识（2）：Py-金融研究相关实用库">
                  <span class="pl__circle"></span><span class="pl__title">Python | 零碎知识（2）：Py-金融研究相关实用库</span><span class="pl__date">2016-05-23</span>
                </a>
            
      
            
                <a class="电影电视剧 pl__all" href="/2016/05/05/film-comments/" title="电影 | 未成年之欲 | Teen Lust | 喜剧 | 2014">
                  <span class="pl__circle"></span><span class="pl__title">电影 | 未成年之欲 | Teen Lust | 喜剧 | 2014</span><span class="pl__date">2016-05-05</span>
                </a>
            
                <a class="电影电视剧 pl__all" href="/2016/05/09/tv-series-1/" title="电视剧 | 疑犯追踪 | Person of Interest">
                  <span class="pl__circle"></span><span class="pl__title">电视剧 | 疑犯追踪 | Person of Interest</span><span class="pl__date">2016-05-09</span>
                </a>
            
      
            
                <a class="投资理财 pl__all" href="/2016/05/05/stock-txd/" title="炒股 | 通信达T0002个性化设置">
                  <span class="pl__circle"></span><span class="pl__title">炒股 | 通信达T0002个性化设置</span><span class="pl__date">2016-05-05</span>
                </a>
            
      
            
                <a class="English pl__all" href="/2016/05/13/voa-Filter-Blue-Light-for-Better-Sleep/" title="VOA | 听力 | Filter Blue Light for Better Sleep">
                  <span class="pl__circle"></span><span class="pl__title">VOA | 听力 | Filter Blue Light for Better Sleep</span><span class="pl__date">2016-05-13</span>
                </a>
            
      
            
                <a class="读书笔记 pl__all" href="/2016/05/04/test-post/" title="道德经 | 第一章">
                  <span class="pl__circle"></span><span class="pl__title">道德经 | 第一章</span><span class="pl__date">2016-05-04</span>
                </a>
            
      
    </nav>
  </div> <!-- end #posts-list -->
</aside> <!-- end #sidebar -->

    <div id="post">
      <div id="pjax">
        <article id="post__content">
  <h1 id="post__title" data-identifier="2016-05-07">Python | 零碎知识（1）：字典排序问题</h1>
  <h2 id="实战：统计Python中的字数"><a href="#实战：统计Python中的字数" class="headerlink" title="实战：统计Python中的字数"></a><font color="blue">实战：统计Python中的字数</font></h2><p><strong>问题</strong><br>在 Python 中实施函数“count_words()”，该函数将字符串“s”和数字“n”用作输入，并返回“s”中“n”个出现频率最高的单词。返回值应该是一个元组列表-出现频率最高的“n”个单词及其相应的出现次数“[(, ), (, ), …]”，按出现次数的降序排列。<br>您可以假设所有输入都是小写形式，并且不含标点符号或其他字符（只包含字母和单个分隔空格）。如果出现次数相同，则按字母顺序排列出现次数相同的单词。<br>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print count_words(&quot;betty bought a bit of butter but the butter was bitter&quot;,3)</span><br><span class="line">    # 输出  =  [(&apos;butter&apos;, 2), (&apos;a&apos;, 1), (&apos;betty&apos;, 1)]</span><br></pre></td></tr></table></figure>
<p><strong>思路解析及代码</strong><br>（1）字符切分(split)，统计各单词出现的次数(字典get)。（2）使用排序函数(sorted)对字典进行排序，其中定义比较函数compare是关键。代码如下：</p>
<figure class="highlight plain"><figcaption><span>功能：统计单词数，先按出现次数(大到小)排序，次数相同时，按单词字母顺序排序</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">def compare(a,b):</span><br><span class="line">    if b[1]&gt;a[1]:</span><br><span class="line">        return 1</span><br><span class="line">    elif b[1]==a[1]:</span><br><span class="line">        if a[0]&gt;b[0]:</span><br><span class="line">            return 1</span><br><span class="line">        else:</span><br><span class="line">            return -1</span><br><span class="line">    else: return -1</span><br><span class="line">def count_words(s, n):</span><br><span class="line">    &quot;&quot;&quot;Return the n most frequently occuring words in s.&quot;&quot;&quot;</span><br><span class="line">    ##Count the number of occurences of each word in s</span><br><span class="line">    d =&#123;&#125;</span><br><span class="line">    for word in s.split():</span><br><span class="line">        d[word] =d.get(word,0)+1  #D[k] if k in D, else d.  d defaults to None</span><br><span class="line">    ##Sort the occurences in descending order (alphabexcally in case of xes)</span><br><span class="line">    #d =sorted(d.iteritems(),key=lambda t:t[1],reverse=True)</span><br><span class="line">    #print &quot;按值排序，从大到小 d=&quot;, d</span><br><span class="line">    vk =sorted(d.items(),cmp=compare)</span><br><span class="line">    return vk[:n]</span><br><span class="line">    ##Return the top n words as a list of tuples (&lt;word&gt;, &lt;count&gt;)</span><br><span class="line">def test_run():</span><br><span class="line">    &quot;&quot;&quot;Test count_words() with some inputs.&quot;&quot;&quot;</span><br><span class="line">    print count_words(&quot;cat bat mat cat bat cat&quot;, 3)</span><br><span class="line">    print count_words(&quot;betty bought a bit of butter but the butter was bitter&quot;, 3)</span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    test_run()</span><br></pre></td></tr></table></figure>
<p>##字典排序：sort、reversed、sorted</p>
<p><strong>1、reversed(sequence)</strong><br>倒序：对一个序列进行倒序排序，注意该函数返回一个倒序迭代器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print list(reversed([&apos;dream&apos;,&apos;a&apos;,&apos;have&apos;,&apos;I&apos;]))</span><br><span class="line">#输出： [&apos;I&apos;, &apos;have&apos;, &apos;a&apos;, &apos;dream&apos;]</span><br></pre></td></tr></table></figure>
<p><strong>2、sorted(iterable, cmp=None, key=None, reverse=False)</strong><br>iterable为可迭代对象, 如果字典键值迭代器；cmp为<font color="red">比较函数</font>；key为排序用的键或键值；reverse指定升降序,True-降序,False-升序(默认)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;&apos;bat&apos;: 2, &apos;cat&apos;: 3, &apos;mat&apos;: 1&#125; #按键值大到小排序</span><br><span class="line"> sorted(d.iteritems(),key=lambda t:t[1],reverse=True)</span><br><span class="line"> #输出：[(&apos;cat&apos;, 3), (&apos;bat&apos;, 2), (&apos;mat&apos;, 1)]</span><br><span class="line"> d = &#123;&apos;bat&apos;: 2, &apos;cat&apos;: 3, &apos;mat&apos;: 1&#125; #按键字母顺序排序</span><br><span class="line"> sorted(d.iteritems(),key=lambda t:t[0],reverse=False)</span><br><span class="line"> #输出：[(&apos;bat&apos;, 2), (&apos;cat&apos;, 3), (&apos;mat&apos;, 1)]</span><br></pre></td></tr></table></figure>
<p><font color="blue">cmp ——&gt; cmp(x,y) </font>，该函数会在x &lt; y时返回负数，在x &gt; y 时返回正数，如果x = y则返回0（根据你的定义）。如下：</p>
<pre><code># 内建比较函数cmp的默认方法
cmp(42,32)  ---&gt; 1
cmp(99,100) ---&gt;-1
cmp(10,10)  ---&gt; 0
</code></pre><p>自定义cmp方法。如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 例1、数字降序排序 | 也可直接用：numbers.sort(reverse=True))</span><br><span class="line">numbers=[5,2,9,7]</span><br><span class="line">numbers.sort(lambda a,b:b-a) #cmp=lambda a,b:b-a</span><br><span class="line">输出 ：[9,7,5,2]</span><br><span class="line"># 例2、如果数组成员不是数字，而是其它的类型例如dict，想根据某个属性来排序</span><br><span class="line">persons=[&#123;&apos;name&apos;:&apos;zhang3&apos;,&apos;age&apos;:15&#125;,&#123;&apos;name&apos;:&apos;li4&apos;,&apos;age&apos;:12&#125;]</span><br><span class="line">persons.sort(lambda a,b:a[&apos;age&apos;]-b[&apos;age&apos;]) </span><br><span class="line">输出 ：[&#123;&apos;age&apos;: 12, &apos;name&apos;: &apos;li4&apos;&#125;, &#123;&apos;age&apos;: 15, &apos;name&apos;: &apos;zhang3&apos;&#125;]</span><br></pre></td></tr></table></figure>
<p>从例子中可知，<em>cmp=lambda a,b:a[‘age’]-b[‘age’], a={‘name’:’zhang3’,’age’:15}，b={‘name’:’li4’,’age’:12}，a[‘age’]=15-12=b[‘age’]=3&gt;0</em>，返回True。触发reverse=True参数，即从小打大，顺序互换。</p>
<p><strong>注意</strong>：在python3.x中取消了cmp参数，也不支持直接往sort()里面传函数了。可以构造排序函数传递给key来实现。</p>

</article>
<button id="js-fullscreen"><span id="icon-arrow" class="fontello"></span></button>
<script src="/js/js-lib.js" type="text/javascript"></script>

  <link rel="stylesheet" type="text/css" href="/css/codeStyle/xcode.css" />
  <script src="/js/highlight.pack.js" type="text/javascript"></script>


  <div id="post__action">
      <a id="icon-heart" class="fontello" href="javascript:donate();"></a>
  </div>
  <script src="/layer/layer.js" type="text/javascript"></script>
  <script src="/layer/extend/layer.ext.js" type="text/javascript"></script>



<!-- 多说评论框 start -->
  <div class="ds-thread" data-thread-key="undefined" data-title="Python | 零碎知识（1）：字典排序问题" data-url="http://5267.github.io/http://yoursite.com/2016/05/07/Coding/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"5267"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共JS代码 end -->

        <section>
 <center>	<font size=3  color=purple>专注数据分析、数据挖掘、大数据领域，习惯使用R、Python两把数据分析利器。非常推崇开源理念，我将在这儿和大家分享平时学习、生活的点点滴滴，期待和大伙儿共同进步！曾实习单位：蚂蚁金服*大数据安全部(数据分析师)，同花顺*金融研究中心(金融研究员)，IBM*CDL(consultant)</font> </center> <br/>

<p id="copyright"><a href="http://hexo.io" target="_blank">Hexo</a>创建&nbsp;&nbsp;|&nbsp;&nbsp;主题<a href="https://github.com/tangkunyin/hexo-theme-ttstyle" target="_blank">TTStyle</a>&nbsp;&nbsp;|&nbsp;&nbsp;感谢<a href="http://gitcafe.com/signup?invited_by=tangkunyin" target="_blank">GitCafe</a>支持</p>
<!-- 百度统计 -->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?a01595b492af7e4a793230e3d49ae638";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


      </div>
      <div id="post__toc-trigger">
        <div id="post__toc">
          <span id="post__toc-title">目录</span>
          <ul id="post__toc-ul"></ul>
        </div>
      </div>
    </div>
  </body>
</html>
